// 의약품 목록 조회 관련 DTO

/**
 * 의약품 기본 정보 DTO
 * 약 검색 페이지 카드에 표시할 정보
 */
export interface MediBasicDto {
  itemSeq: string; // 품목일련번호 (ITEM_SEQ) - 고유 식별자
  itemName: string; // 의약품명 (ITEM_NAME) - "타이레놀정500밀리그람(아세트아미노펜)"
  entpName: string; // 제조사 (ENTP_NAME) - "한국존슨앤드존슨판매(유)"
  classNo: string; // 분류 (CLASS_NO) - "[114]해열.진통.소염제"
  chart?: string; // 성상 (CHART) - "흰색의 장방형 필름코팅정제"
  materialName?: string; // 주성분 (MATERIAL_NAME) - "아세트아미노펜,,500,밀리그램,USP,"
  etcOtcCode?: string; // 전문/일반의약품 구분 (ETC_OTC_CODE)
}

/**
 * 의약품 목록 조회 요청 DTO
 */
export interface MediListRequestDto {
  limit: number; // 한 번에 로드할 데이터 개수 (기본 100)
  page?: number; // 페이지 번호 (기본 1, 페이지네이션용)
  search?: string; // 검색어 (의약품명, 성분, 제조사 검색)
  category?: string; // 카테고리 필터 ("전체" | "진통제" | "감기약" | "소화제" | "항생제")
  sortBy?: 'name' | 'reviews' | 'name_asc' | 'name_desc'; // 정렬 기준 (가나다순 오름차순/내림차순 | 리뷰 많은 순)
  cursor?: string; // 무한 스크롤용 커서 (마지막 itemSeq)
}

/**
 * 의약품 목록 조회 응답 DTO
 */
export interface MediListResponseDto {
  medicines: MediBasicDto[]; // 의약품 목록
  hasMore: boolean; // 더 많은 데이터 존재 여부
  nextCursor?: string; // 다음 페이지 커서
  totalCount: number; // 검색 결과 총 개수
}

/**
 * 카테고리 키워드 매핑
 * CLASS_NO 필드에서 키워드 검색으로 카테고리 필터링
 * 프론트엔드 medicineFormatter.ts의 CATEGORY_RULES와 일치
 */
export const CATEGORY_KEYWORDS = {
  전체: null,
  진통제: '해열', // "[114]해열.진통.소염제" → "해열" 포함 (해열진통소염제)
  심혈관약: '혈압', // "[214]혈압강하제" → "혈압" 포함
  당뇨약: '대사', // "[264]대사성의약품" → "대사" 포함 (당뇨병약 포함)
  신경약: '신경', // "[117]중추신경계용약" → "신경" 포함
  항생제: '그람', // "[611]그람양성균용제" → "그람" 포함
  소화제: '건위소화제', // "[232]건위소화제" → "건위소화제" 포함
  감기약: '진해', // "[131]진해거담제" → "진해" 포함
  알레르기약: '히스타민', // "[441]항히스타민제" → "히스타민" 포함
} as const;

/**
 * 병명-약 매핑 데이터 (CLASS_NO 기반)
 * 실제 의약품 데이터베이스의 CLASS_NO와 매칭
 */
export const DISEASE_CLASS_NO_MAP: Record<string, string[]> = {
  // 진통/해열 관련
  '두통': ['해열', '진통', '소염', '114'],
  '편두통': ['해열', '진통', '소염', '114'],
  '치통': ['해열', '진통', '소염', '114'],
  '관절통': ['해열', '진통', '소염', '114'],
  '요통': ['해열', '진통', '소염', '114'],
  '생리통': ['해열', '진통', '소염', '114'],
  '근육통': ['해열', '진통', '소염', '114'],
  '신경통': ['신경', '117'],
  
  // 감기/호흡기 관련
  '감기': ['진해', '해열', '진통', '소염', '131', '114'],
  '독감': ['진해', '해열', '진통', '소염', '131', '114'],
  '기침': ['진해', '131'],
  '목아픔': ['진해', '해열', '진통', '소염', '131', '114'],
  '열': ['해열', '진통', '소염', '114'],
  '코막힘': ['진해', '131'],
  '가래': ['진해', '131'],
  
  // 소화기 관련
  '소화불량': ['건위소화제', '232'],
  '위산과다': ['건위소화제', '232'],
  '위염': ['건위소화제', '232'],
  '위궤양': ['건위소화제', '232'],
  '설사': ['건위소화제', '232'],
  '변비': ['건위소화제', '232'],
  '메스꺼움': ['건위소화제', '232'],
  '복통': ['건위소화제', '232'],
  '속쓰림': ['건위소화제', '232'],
  
  // 알레르기 관련
  '알레르기': ['히스타민', '441'],
  '콧물': ['히스타민', '진해', '441', '131'],
  '재채기': ['히스타민', '441'],
  '가려움': ['히스타민', '441'],
  '두드러기': ['히스타민', '441'],
  '알레르기성비염': ['히스타민', '441'],
  
  // 심혈관 관련
  '고혈압': ['혈압', '214'],
  '협심증': ['혈압', '214'],
  '부정맥': ['혈압', '214'],
  '심부전': ['혈압', '214'],
  
  // 당뇨 관련
  '당뇨': ['대사', '264'],
  '고혈당': ['대사', '264'],
  '당뇨병': ['대사', '264'],
  
  // 신경계 관련
  '불면증': ['신경', '117'],
  '우울증': ['신경', '117'],
  '불안증': ['신경', '117'],
  '간질': ['신경', '117'],
  '파킨슨병': ['신경', '117'],
  '치매': ['신경', '117'],
  
  // 항생제 관련
  '세균감염': ['그람', '611'],
  '폐렴': ['그람', '611'],
  '요로감염': ['그람', '611'],
  '피부감염': ['그람', '611'],
  
  // 피부 관련 (일반적으로 소염제나 항히스타민제)
  '습진': ['히스타민', '소염', '441', '114'],
  '아토피': ['히스타민', '소염', '441', '114'],
  '여드름': ['그람', '611'],
  '무좀': ['그람', '611'],
  
  // 기타 (일반적으로 건위소화제나 비타민)
  '비타민': ['건위소화제', '232'],
  '철분': ['건위소화제', '232'],
  '칼슘': ['건위소화제', '232'],
  '오메가3': ['건위소화제', '232'],
  '프로바이오틱스': ['건위소화제', '232'],
};

/**
 * 카테고리 타입 정의
 */
export type CategoryType = keyof typeof CATEGORY_KEYWORDS;
