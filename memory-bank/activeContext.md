# 활성 컨텍스트 - 약알고

## 현재 작업 상황

### 프로젝트 상태
- **단계**: 실제 API 연동 작업 진행 중
- **마지막 업데이트**: 2024년 12월 (API 클라이언트 및 환경 설정 구축)
- **현재 브랜치**: feat/41-edit-medicine-api/Kim

### 최근 변경사항
1. **메모리 뱅크 시스템 구축 완료**
   - 프로젝트 브리프 문서 생성
   - 제품 컨텍스트 정의
   - 기술 스택 및 아키텍처 문서화
   - 시스템 패턴 및 디자인 가이드 수립

2. **API 인프라 구축 시도**
   - 환경 설정 파일 생성 (env.example) - 삭제됨
   - API 클라이언트 구축 (lib/api.ts) - 삭제됨
   - 커스텀 훅 개발 (hooks/useMedicines.ts) - 삭제됨
   - 의약품 상세 API 엔드포인트 (app/api/medicines/[id]/route.ts) - 삭제됨

3. **현재 상황**
   - 의약품 페이지가 여전히 Mock 데이터 사용 중
   - 실제 API 연동이 완료되지 않은 상태
   - 환경 설정 및 API 클라이언트 재구축 필요

## 현재 집중 영역

### 1. 의약품 API 실제 연동 작업
- **브랜치**: feat/41-edit-medicine-api/Kim
- **목표**: Mock 데이터에서 실제 API 연동으로 전환
- **상태**: 재작업 필요

### 2. 핵심 기능 현황
- ✅ **기본 프로젝트 구조**: 완료
- ✅ **데이터베이스 스키마**: 완료
- ✅ **UI 컴포넌트 시스템**: 완료
- ❌ **의약품 검색 API**: Mock 데이터 상태 (재작업 필요)
- ⏳ **약국 지도 기능**: 대기
- ⏳ **전문가 Q&A 시스템**: 대기
- ⏳ **개인 약물 관리**: 대기

## 즉시 해결해야 할 문제

### 1. 삭제된 파일들 재생성
- **env.example**: 환경 변수 설정 파일
- **lib/api.ts**: API 클라이언트 및 타입 정의
- **hooks/useMedicines.ts**: 의약품 데이터 관리 훅
- **app/api/medicines/[id]/route.ts**: 의약품 상세 조회 API

### 2. Mock 데이터 제거 및 실제 API 연동
- **app/(anon-user)/medicines/page.tsx**: 현재 Mock 데이터 사용 중
- 실제 데이터베이스 연동 필요
- 로딩 상태 및 에러 처리 구현 필요

## 다음 단계

### 즉시 해야 할 작업 (우선순위 1)
1. **환경 설정 재구축**
   - env.example 파일 재생성
   - 데이터베이스 연결 설정
   - API 키 및 인증 설정

2. **API 클라이언트 재구축**
   - lib/api.ts 재생성
   - 타입 정의 및 에러 처리
   - axios 기반 HTTP 클라이언트

3. **의약품 페이지 실제 연동**
   - Mock 데이터 제거
   - 실제 API 호출 구현
   - 로딩 및 에러 상태 처리

### 단기 목표 (1-2주)
1. **의약품 검색 기능 완성**
   - 검색 성능 최적화
   - 필터링 기능 강화
   - 페이지네이션 구현

2. **약국 지도 기능 구현**
   - 카카오 맵 API 통합
   - 위치 기반 약국 검색
   - 실시간 재고 정보 연동

### 중기 목표 (1개월)
1. **사용자 인증 시스템 완성**
   - NextAuth.js 설정 완료
   - 사용자 프로필 관리
   - 권한 기반 접근 제어

2. **전문가 Q&A 시스템**
   - 질문 작성 및 답변 기능
   - 전문가 인증 시스템
   - 평점 및 리뷰 시스템

## 기술적 고려사항

### 성능 최적화
- **데이터베이스 인덱싱**: medicines 테이블 검색 성능 개선
- **캐싱 전략**: Redis 도입 고려
- **이미지 최적화**: Next.js Image 컴포넌트 활용

### 보안 강화
- **API 레이트 리미팅**: 무차별 요청 방지
- **입력 검증**: Zod 스키마 강화
- **CORS 설정**: 프로덕션 환경 보안

### 사용자 경험 개선
- **로딩 상태**: Skeleton UI 구현
- **에러 처리**: 사용자 친화적 에러 메시지
- **접근성**: ARIA 라벨 및 키보드 네비게이션

## 현재 이슈 및 해결 방안

### 1. API 인프라 부재
- **이슈**: 실제 API 연동을 위한 기반 파일들이 삭제됨
- **해결 방안**: 
  - 환경 설정 파일 재생성
  - API 클라이언트 재구축
  - 커스텀 훅 재개발

### 2. Mock 데이터 의존성
- **이슈**: 프론트엔드가 여전히 Mock 데이터에 의존
- **해결 방안**: 
  - 실제 데이터베이스 연동
  - API 엔드포인트 구현
  - 점진적 마이그레이션

### 3. 검색 성능
- **이슈**: 대용량 의약품 데이터 검색 시 응답 지연 예상
- **해결 방안**: 
  - 전문 검색 엔진 도입 (Elasticsearch 고려)
  - 데이터베이스 인덱스 최적화
  - 페이지네이션 및 무한 스크롤 구현

## 팀 협업 상황

### 현재 작업자
- **Kim**: 의약품 API 개선 작업 담당

### 코드 리뷰 포인트
- 컨벤션 준수 확인 (camelCase, 함수명 동사 시작 등)
- 타입 안전성 검증
- 성능 최적화 여부
- 에러 처리 완성도

### 브랜치 전략
- **main**: 프로덕션 배포 브랜치
- **develop**: 개발 통합 브랜치
- **feature/***: 기능별 개발 브랜치

## 메트릭 및 모니터링

### 추적 중인 지표
- API 응답 시간
- 검색 성공률
- 사용자 세션 시간
- 에러 발생률

### 개선 목표
- 검색 응답 시간 < 500ms
- API 가용성 > 99.9%
- 모바일 성능 점수 > 90점

## 긴급 액션 아이템

### 1. 환경 설정 복구 (최우선)
- [ ] env.example 파일 재생성
- [ ] 데이터베이스 연결 테스트
- [ ] 환경 변수 검증

### 2. API 인프라 재구축 (우선)
- [ ] lib/api.ts 재생성
- [ ] 타입 정의 완성
- [ ] 에러 처리 패턴 구현

### 3. 의약품 페이지 실제 연동 (우선)
- [ ] Mock 데이터 제거
- [ ] 실제 API 호출 구현
- [ ] 로딩 및 에러 상태 처리 